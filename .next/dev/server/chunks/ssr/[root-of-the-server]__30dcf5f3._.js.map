{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 21, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/target/idl/stake.json"],"sourcesContent":["{\"address\":\"BjXncxDW9oA7TqLdWVLcgyhoPT3vecadXmi9HJFw2Hmc\",\"metadata\":{\"name\":\"stake\",\"version\":\"0.1.0\",\"spec\":\"0.1.0\",\"description\":\"Created with Anchor\"},\"instructions\":[{\"name\":\"initialize_vault\",\"docs\":[\"Initializes the staking vault\"],\"discriminator\":[48,191,163,44,71,129,63,164],\"accounts\":[{\"name\":\"authority\",\"writable\":true,\"signer\":true},{\"name\":\"vault\",\"writable\":true,\"pda\":{\"seeds\":[{\"kind\":\"const\",\"value\":[118,97,117,108,116]}]}},{\"name\":\"vault_sol_account\",\"writable\":true,\"pda\":{\"seeds\":[{\"kind\":\"const\",\"value\":[118,97,117,108,116,95,115,111,108]}]}},{\"name\":\"system_program\",\"address\":\"11111111111111111111111111111111\"}],\"args\":[]},{\"name\":\"stake_sol\",\"docs\":[\"Stakes native SOL into the vault\"],\"discriminator\":[200,38,157,155,245,57,236,168],\"accounts\":[{\"name\":\"user\",\"writable\":true,\"signer\":true},{\"name\":\"vault\",\"writable\":true,\"pda\":{\"seeds\":[{\"kind\":\"const\",\"value\":[118,97,117,108,116]}]}},{\"name\":\"stake_account\",\"writable\":true,\"pda\":{\"seeds\":[{\"kind\":\"const\",\"value\":[115,116,97,107,101]},{\"kind\":\"account\",\"path\":\"user\"}]}},{\"name\":\"vault_sol_account\",\"writable\":true,\"pda\":{\"seeds\":[{\"kind\":\"const\",\"value\":[118,97,117,108,116,95,115,111,108]}]}},{\"name\":\"system_program\",\"address\":\"11111111111111111111111111111111\"}],\"args\":[{\"name\":\"amount\",\"type\":\"u64\"}]},{\"name\":\"unstake_sol\",\"docs\":[\"Unstakes native SOL from the vault\"],\"discriminator\":[70,150,140,208,166,13,252,150],\"accounts\":[{\"name\":\"user\",\"writable\":true,\"signer\":true},{\"name\":\"vault\",\"writable\":true,\"pda\":{\"seeds\":[{\"kind\":\"const\",\"value\":[118,97,117,108,116]}]}},{\"name\":\"stake_account\",\"writable\":true,\"pda\":{\"seeds\":[{\"kind\":\"const\",\"value\":[115,116,97,107,101]},{\"kind\":\"account\",\"path\":\"user\"}]}},{\"name\":\"vault_sol_account\",\"writable\":true,\"pda\":{\"seeds\":[{\"kind\":\"const\",\"value\":[118,97,117,108,116,95,115,111,108]}]}},{\"name\":\"system_program\",\"address\":\"11111111111111111111111111111111\"}],\"args\":[{\"name\":\"amount\",\"type\":\"u64\"}]}],\"accounts\":[{\"name\":\"StakeAccount\",\"discriminator\":[80,158,67,124,50,189,192,255]},{\"name\":\"Vault\",\"discriminator\":[211,8,232,43,2,152,117,119]}],\"errors\":[{\"code\":6000,\"name\":\"InsufficientFunds\",\"msg\":\"Insufficient funds to unstake\"},{\"code\":6001,\"name\":\"InvalidAmount\",\"msg\":\"Invalid stake amount\"},{\"code\":6002,\"name\":\"Overflow\",\"msg\":\"Arithmetic overflow\"},{\"code\":6003,\"name\":\"Unauthorized\",\"msg\":\"Unauthorized access\"}],\"types\":[{\"name\":\"StakeAccount\",\"docs\":[\"StakeAccount PDA for tracking a user's native SOL stake.\",\"\",\"## PDA Seeds: [\\\"stake\\\", user_pubkey]\",\"- `\\\"stake\\\"`: Namespace prefix to avoid collisions with other PDAs\",\"- `user_pubkey`: The staker's wallet address, ensuring one stake account per user\",\"\",\"## Space Calculation\",\"- Discriminator: 8 bytes (Anchor account identifier)\",\"- user: 32 bytes (Pubkey)\",\"- amount: 8 bytes (u64)\",\"- stake_timestamp: 8 bytes (i64)\",\"- bump: 1 byte (u8)\",\"- Total: 8 + 32 + 8 + 8 + 1 = 57 bytes\",\"\",\"Using InitSpace derive macro for automatic calculation.\"],\"type\":{\"kind\":\"struct\",\"fields\":[{\"name\":\"user\",\"docs\":[\"The user's wallet pubkey who owns this stake.\",\"Used as part of PDA seeds to ensure unique stake account per user.\"],\"type\":\"pubkey\"},{\"name\":\"amount\",\"docs\":[\"Amount of native SOL staked in lamports.\",\"1 SOL = 1_000_000_000 lamports (10^9).\",\"u64 max: ~18.4 billion SOL (more than total supply).\"],\"type\":\"u64\"},{\"name\":\"stake_timestamp\",\"docs\":[\"Unix timestamp (seconds) when the stake was created or last updated.\",\"Used for calculating staking duration, rewards, or enforcing lock periods.\",\"i64 allows dates until year 292 billion.\"],\"type\":\"i64\"},{\"name\":\"bump\",\"docs\":[\"Bump seed for PDA derivation.\",\"Stored to avoid recalculating during subsequent instructions.\",\"Seeds: [\\\"stake\\\", user.key().as_ref()], bump\"],\"type\":\"u8\"}]}},{\"name\":\"Vault\",\"docs\":[\"Vault PDA (Program Derived Address) for holding staked SOL.\",\"\",\"## Why use a PDA?\",\"- **Deterministic**: The address is derived from seeds [\\\"vault\\\"], making it\",\"predictable and discoverable by anyone with the program ID.\",\"- **Program-owned**: Only this program can sign for the PDA, ensuring\",\"SOL can only be moved through program instructions.\",\"- **No private key**: PDAs have no corresponding private key, eliminating\",\"the risk of key compromise.\",\"- **Rent-exempt**: Initialized with enough lamports to be rent-exempt,\",\"ensuring the account persists indefinitely.\",\"\",\"## Seeds: [\\\"vault\\\"]\",\"Single seed creates a unique, singleton vault per program deployment.\"],\"type\":{\"kind\":\"struct\",\"fields\":[{\"name\":\"authority\",\"docs\":[\"Authority that can manage the vault (e.g., admin operations)\"],\"type\":\"pubkey\"},{\"name\":\"bump\",\"docs\":[\"Bump seed used to derive the PDA - stored to avoid recalculation\"],\"type\":\"u8\"},{\"name\":\"vault_bump\",\"docs\":[\"Bump seed for the vault's SOL holding account\"],\"type\":\"u8\"},{\"name\":\"total_staked\",\"docs\":[\"Total lamports (SOL) staked in the vault\"],\"type\":\"u64\"}]}}]}"],"names":[],"mappings":"AAAA"}},
    {"offset": {"line": 21, "column": 4913}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 25, "column": 0}, "map": {"version":3,"sources":["file:///Users/abdul/projects/stake/app/lib/anchorClient.ts"],"sourcesContent":["import { AnchorProvider, Program, setProvider } from \"@coral-xyz/anchor\";\nimport { Connection, clusterApiUrl, PublicKey } from \"@solana/web3.js\";\nimport idl from \"../../target/idl/stake.json\";\n\nconst programId = new PublicKey(\"BjXncxDW9oA7TqLdWVLcgyhoPT3vecadXmi9HJFw2Hmc\");\n\nexport function getProgram(wallet: any) {\n  if (!wallet || !wallet.connected) {\n    throw new Error(\"Wallet not connected\");\n  }\n\n  const connection = new Connection(clusterApiUrl(\"devnet\"), \"confirmed\");\n  const provider = new AnchorProvider(connection, wallet, {});\n\n  setProvider(provider);\n\n  return new Program(idl as any, provider);\n}"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AACA;AACA;;;;AAEA,MAAM,YAAY,IAAI,0KAAS,CAAC;AAEzB,SAAS,WAAW,MAAW;IACpC,IAAI,CAAC,UAAU,CAAC,OAAO,SAAS,EAAE;QAChC,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,aAAa,IAAI,2KAAU,CAAC,IAAA,8KAAa,EAAC,WAAW;IAC3D,MAAM,WAAW,IAAI,qLAAc,CAAC,YAAY,QAAQ,CAAC;IAEzD,IAAA,kLAAW,EAAC;IAEZ,OAAO,IAAI,sLAAO,CAAC,yGAAG,EAAS;AACjC"}},
    {"offset": {"line": 51, "column": 0}, "map": {"version":3,"sources":["file:///Users/abdul/projects/stake/app/components/StakeInfo.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { PublicKey } from \"@solana/web3.js\";\nimport { useWallet } from \"@solana/wallet-adapter-react\";\nimport { getProgram } from \"../lib/anchorClient\";\n\nconst StakeInfo = () => {\n  const wallet = useWallet();\n  const [stakeData, setStakeData] = useState<{ amount: number; timestamp: string } | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const fetchStakeAccount = async () => {\n      if (!wallet.connected || !wallet.publicKey) {\n        setStakeData(null);\n        return;\n      }\n\n      setLoading(true);\n      setError(null);\n\n      try {\n        const program = getProgram(wallet);\n        const [stakeAccountPDA] = PublicKey.findProgramAddressSync(\n          [Buffer.from(\"stake\"), wallet.publicKey.toBuffer()],\n          program.programId\n        );\n\n        const account = await (program.account as any).stakeAccount.fetchNullable(stakeAccountPDA);\n\n        if (!account) {\n          setStakeData(null);\n        } else {\n          setStakeData({\n            amount: account.amount.toNumber() / 1e9, // Convert lamports to SOL\n            timestamp: new Date(account.stakeTimestamp.toNumber() * 1000).toLocaleString(),\n          });\n        }\n      } catch (err) {\n        console.error(err);\n        setError(\"Failed to fetch stake account.\");\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchStakeAccount();\n  }, [wallet.connected, wallet.publicKey]);\n\n  if (!wallet.connected) {\n    return null;\n  }\n\n  if (loading) {\n    return (\n      <div className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-5 text-center border border-gray-200\">\n        <p className=\"text-gray-600 animate-pulse\">Loading stake info...</p>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"bg-red-50 rounded-xl p-5 text-center border border-red-100\">\n        <p className=\"text-red-600 font-medium\">{error}</p>\n      </div>\n    );\n  }\n\n  if (!stakeData) {\n    return (\n      <div className=\"bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl p-5 text-center border border-gray-200\">\n        <p className=\"text-gray-600 font-medium\">No stake account found</p>\n        <p className=\"text-xs text-gray-500 mt-1\">Stake SOL to get started</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-gradient-to-br from-indigo-50 to-blue-50 rounded-xl p-5 space-y-3 border border-indigo-100\">\n      <div className=\"flex justify-between items-center\">\n        <span className=\"text-sm font-medium text-gray-600\">Staked Amount</span>\n        <span className=\"text-xl font-bold text-indigo-700\">{stakeData.amount} SOL</span>\n      </div>\n      <div className=\"flex justify-between items-center\">\n        <span className=\"text-sm font-medium text-gray-600\">Staked At</span>\n        <span className=\"text-xs text-gray-700\">{stakeData.timestamp}</span>\n      </div>\n    </div>\n  );\n};\n\nexport default StakeInfo;"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOA,MAAM,YAAY;IAChB,MAAM,SAAS,IAAA,8LAAS;IACxB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAA+C;IACzF,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAElD,IAAA,kNAAS,EAAC;QACR,MAAM,oBAAoB;YACxB,IAAI,CAAC,OAAO,SAAS,IAAI,CAAC,OAAO,SAAS,EAAE;gBAC1C,aAAa;gBACb;YACF;YAEA,WAAW;YACX,SAAS;YAET,IAAI;gBACF,MAAM,UAAU,IAAA,wIAAU,EAAC;gBAC3B,MAAM,CAAC,gBAAgB,GAAG,0KAAS,CAAC,sBAAsB,CACxD;oBAAC,OAAO,IAAI,CAAC;oBAAU,OAAO,SAAS,CAAC,QAAQ;iBAAG,EACnD,QAAQ,SAAS;gBAGnB,MAAM,UAAU,MAAM,AAAC,QAAQ,OAAO,CAAS,YAAY,CAAC,aAAa,CAAC;gBAE1E,IAAI,CAAC,SAAS;oBACZ,aAAa;gBACf,OAAO;oBACL,aAAa;wBACX,QAAQ,QAAQ,MAAM,CAAC,QAAQ,KAAK;wBACpC,WAAW,IAAI,KAAK,QAAQ,cAAc,CAAC,QAAQ,KAAK,MAAM,cAAc;oBAC9E;gBACF;YACF,EAAE,OAAO,KAAK;gBACZ,QAAQ,KAAK,CAAC;gBACd,SAAS;YACX,SAAU;gBACR,WAAW;YACb;QACF;QAEA;IACF,GAAG;QAAC,OAAO,SAAS;QAAE,OAAO,SAAS;KAAC;IAEvC,IAAI,CAAC,OAAO,SAAS,EAAE;QACrB,OAAO;IACT;IAEA,IAAI,SAAS;QACX,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAE,WAAU;0BAA8B;;;;;;;;;;;IAGjD;IAEA,IAAI,OAAO;QACT,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAE,WAAU;0BAA4B;;;;;;;;;;;IAG/C;IAEA,IAAI,CAAC,WAAW;QACd,qBACE,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAE,WAAU;8BAA4B;;;;;;8BACzC,8OAAC;oBAAE,WAAU;8BAA6B;;;;;;;;;;;;IAGhD;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,WAAU;kCAAoC;;;;;;kCACpD,8OAAC;wBAAK,WAAU;;4BAAqC,UAAU,MAAM;4BAAC;;;;;;;;;;;;;0BAExE,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAK,WAAU;kCAAoC;;;;;;kCACpD,8OAAC;wBAAK,WAAU;kCAAyB,UAAU,SAAS;;;;;;;;;;;;;;;;;;AAIpE;uCAEe"}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["file:///Users/abdul/projects/stake/app/components/StakeForm.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { useWallet } from \"@solana/wallet-adapter-react\";\nimport { PublicKey, SystemProgram, LAMPORTS_PER_SOL } from \"@solana/web3.js\";\nimport { getProgram } from \"../lib/anchorClient\";\nimport { BN } from \"@coral-xyz/anchor\";\n\nconst StakeForm = () => {\n  const wallet = useWallet();\n  const [amount, setAmount] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [status, setStatus] = useState<{ type: \"success\" | \"error\"; message: string } | null>(null);\n\n  const handleStake = async () => {\n    if (!wallet.connected || !wallet.publicKey) {\n      setStatus({ type: \"error\", message: \"Wallet not connected\" });\n      return;\n    }\n\n    const amountNum = parseFloat(amount);\n    if (isNaN(amountNum) || amountNum <= 0) {\n      setStatus({ type: \"error\", message: \"Invalid amount\" });\n      return;\n    }\n\n    setLoading(true);\n    setStatus(null);\n\n    try {\n      const program = getProgram(wallet);\n      \n      // Convert SOL to lamports\n      const amountLamports = new BN(amountNum * LAMPORTS_PER_SOL);\n\n      // Derive PDAs\n      const [stakeAccountPDA] = PublicKey.findProgramAddressSync(\n        [Buffer.from(\"stake\"), wallet.publicKey.toBuffer()],\n        program.programId\n      );\n\n      const [vaultPDA] = PublicKey.findProgramAddressSync(\n        [Buffer.from(\"vault\")],\n        program.programId\n      );\n\n      const [vaultSolPDA] = PublicKey.findProgramAddressSync(\n        [Buffer.from(\"vault_sol\")],\n        program.programId\n      );\n\n      // Call stake_sol instruction\n      await program.methods\n        .stakeSol(amountLamports)\n        .accounts({\n          user: wallet.publicKey,\n          vault: vaultPDA,\n          stakeAccount: stakeAccountPDA,\n          vaultSolAccount: vaultSolPDA,\n          systemProgram: SystemProgram.programId,\n        })\n        .rpc();\n\n      setStatus({ type: \"success\", message: \"Staked successfully!\" });\n      setAmount(\"\");\n    } catch (err) {\n      console.error(err);\n      setStatus({ type: \"error\", message: \"Failed to stake SOL\" });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const isDisabled = !wallet.connected || loading || !amount || parseFloat(amount) <= 0;\n\n  return (\n    <div className=\"space-y-4\">\n      <div>\n        <label className=\"block text-gray-700 text-sm font-semibold mb-2\">\n          Amount (SOL)\n        </label>\n        <input\n          type=\"number\"\n          step=\"0.01\"\n          min=\"0\"\n          value={amount}\n          onChange={(e) => setAmount(e.target.value)}\n          className=\"w-full py-3 px-4 text-lg border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all\"\n          placeholder=\"0.00\"\n          disabled={!wallet.connected || loading}\n        />\n      </div>\n\n      <button\n        onClick={handleStake}\n        disabled={isDisabled}\n        className={`w-full py-3.5 px-4 rounded-xl font-semibold transition-all transform ${\n          isDisabled\n            ? \"bg-gray-200 text-gray-400 cursor-not-allowed\"\n            : \"bg-gradient-to-r from-indigo-600 to-blue-600 text-white hover:from-indigo-700 hover:to-blue-700 shadow-lg hover:shadow-xl active:scale-95\"\n        }`}\n      >\n        {loading ? \"Staking...\" : \"Stake SOL\"}\n      </button>\n\n      {status && (\n        <div\n          className={`p-4 rounded-xl border ${\n            status.type === \"success\"\n              ? \"bg-green-50 text-green-800 border-green-200\"\n              : \"bg-red-50 text-red-800 border-red-200\"\n          }`}\n        >\n          <p className=\"font-medium\">{status.message}</p>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default StakeForm;"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AAAA;AANA;;;;;;;AAQA,MAAM,YAAY;IAChB,MAAM,SAAS,IAAA,8LAAS;IACxB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAwD;IAE5F,MAAM,cAAc;QAClB,IAAI,CAAC,OAAO,SAAS,IAAI,CAAC,OAAO,SAAS,EAAE;YAC1C,UAAU;gBAAE,MAAM;gBAAS,SAAS;YAAuB;YAC3D;QACF;QAEA,MAAM,YAAY,WAAW;QAC7B,IAAI,MAAM,cAAc,aAAa,GAAG;YACtC,UAAU;gBAAE,MAAM;gBAAS,SAAS;YAAiB;YACrD;QACF;QAEA,WAAW;QACX,UAAU;QAEV,IAAI;YACF,MAAM,UAAU,IAAA,wIAAU,EAAC;YAE3B,0BAA0B;YAC1B,MAAM,iBAAiB,IAAI,4KAAE,CAAC,YAAY,iLAAgB;YAE1D,cAAc;YACd,MAAM,CAAC,gBAAgB,GAAG,0KAAS,CAAC,sBAAsB,CACxD;gBAAC,OAAO,IAAI,CAAC;gBAAU,OAAO,SAAS,CAAC,QAAQ;aAAG,EACnD,QAAQ,SAAS;YAGnB,MAAM,CAAC,SAAS,GAAG,0KAAS,CAAC,sBAAsB,CACjD;gBAAC,OAAO,IAAI,CAAC;aAAS,EACtB,QAAQ,SAAS;YAGnB,MAAM,CAAC,YAAY,GAAG,0KAAS,CAAC,sBAAsB,CACpD;gBAAC,OAAO,IAAI,CAAC;aAAa,EAC1B,QAAQ,SAAS;YAGnB,6BAA6B;YAC7B,MAAM,QAAQ,OAAO,CAClB,QAAQ,CAAC,gBACT,QAAQ,CAAC;gBACR,MAAM,OAAO,SAAS;gBACtB,OAAO;gBACP,cAAc;gBACd,iBAAiB;gBACjB,eAAe,8KAAa,CAAC,SAAS;YACxC,GACC,GAAG;YAEN,UAAU;gBAAE,MAAM;gBAAW,SAAS;YAAuB;YAC7D,UAAU;QACZ,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC;YACd,UAAU;gBAAE,MAAM;gBAAS,SAAS;YAAsB;QAC5D,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,aAAa,CAAC,OAAO,SAAS,IAAI,WAAW,CAAC,UAAU,WAAW,WAAW;IAEpF,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;;kCACC,8OAAC;wBAAM,WAAU;kCAAiD;;;;;;kCAGlE,8OAAC;wBACC,MAAK;wBACL,MAAK;wBACL,KAAI;wBACJ,OAAO;wBACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;wBACzC,WAAU;wBACV,aAAY;wBACZ,UAAU,CAAC,OAAO,SAAS,IAAI;;;;;;;;;;;;0BAInC,8OAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAW,CAAC,qEAAqE,EAC/E,aACI,iDACA,6IACJ;0BAED,UAAU,eAAe;;;;;;YAG3B,wBACC,8OAAC;gBACC,WAAW,CAAC,sBAAsB,EAChC,OAAO,IAAI,KAAK,YACZ,gDACA,yCACJ;0BAEF,cAAA,8OAAC;oBAAE,WAAU;8BAAe,OAAO,OAAO;;;;;;;;;;;;;;;;;AAKpD;uCAEe"}},
    {"offset": {"line": 388, "column": 0}, "map": {"version":3,"sources":["file:///Users/abdul/projects/stake/app/components/UnstakeButton.tsx"],"sourcesContent":["'use client';\n\nimport { useConnection, useWallet } from '@solana/wallet-adapter-react';\nimport { useState } from 'react';\nimport { getProgram } from '../lib/anchorClient';\nimport { PublicKey } from '@solana/web3.js';\nimport * as anchor from '@coral-xyz/anchor';\n\nexport default function UnstakeButton() {\n  const { connection } = useConnection();\n  const wallet = useWallet();\n  const { publicKey, sendTransaction } = wallet;\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [success, setSuccess] = useState(false);\n\n  const handleUnstake = async () => {\n    if (!publicKey) return;\n\n    setIsLoading(true);\n    setError(null);\n    setSuccess(false);\n\n    try {\n      const program = getProgram(wallet);\n\n      // Derive PDAs\n      const [stakeAccount] = PublicKey.findProgramAddressSync(\n        [Buffer.from('stake'), publicKey.toBuffer()],\n        program.programId\n      );\n\n      const [vault] = PublicKey.findProgramAddressSync(\n        [Buffer.from('vault')],\n        program.programId\n      );\n\n      const [vaultSol] = PublicKey.findProgramAddressSync(\n        [Buffer.from('vault_sol')],\n        program.programId\n      );\n\n      // Fetch the stake account to get the staked amount\n      const stakeAccountData = await (program.account as any).stakeAccount.fetch(stakeAccount);\n      const stakedAmount = stakeAccountData.amount;\n\n      // Build transaction to unstake full amount\n      const tx = await program.methods\n        .unstakeSol(stakedAmount)\n        .accounts({\n          user: publicKey,\n          stakeAccount,\n          vault,\n          vaultSolAccount: vaultSol,\n          systemProgram: anchor.web3.SystemProgram.programId,\n        })\n        .transaction();\n\n      // Send transaction\n      const signature = await sendTransaction(tx, connection);\n      await connection.confirmTransaction(signature, 'confirmed');\n\n      setSuccess(true);\n      setError(null);\n    } catch (err: any) {\n      console.error('Unstake error:', err);\n      setError(err.message || 'Failed to unstake SOL');\n      setSuccess(false);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const isDisabled = !publicKey || isLoading;\n\n  return (\n    <div className=\"space-y-4\">\n      <button\n        onClick={handleUnstake}\n        disabled={isDisabled}\n        className={`w-full py-3.5 px-4 rounded-xl font-semibold transition-all border-2 ${\n          isDisabled\n            ? 'bg-gray-100 text-gray-400 cursor-not-allowed border-gray-200'\n            : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50 hover:border-gray-400 active:scale-95'\n        }`}\n      >\n        {isLoading ? 'Unstaking...' : 'Unstake SOL'}\n      </button>\n\n      {success && (\n        <div className=\"p-4 bg-green-50 text-green-800 rounded-xl border border-green-200\">\n          <p className=\"font-medium\">Successfully unstaked SOL!</p>\n        </div>\n      )}\n\n      {error && (\n        <div className=\"p-4 bg-red-50 text-red-800 rounded-xl border border-red-200\">\n          <p className=\"font-medium\">{error}</p>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AACA;AACA;AACA;AACA;AAAA;AANA;;;;;;;AAQe,SAAS;IACtB,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,sMAAa;IACpC,MAAM,SAAS,IAAA,8LAAS;IACxB,MAAM,EAAE,SAAS,EAAE,eAAe,EAAE,GAAG;IACvC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAgB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,gBAAgB;QACpB,IAAI,CAAC,WAAW;QAEhB,aAAa;QACb,SAAS;QACT,WAAW;QAEX,IAAI;YACF,MAAM,UAAU,IAAA,wIAAU,EAAC;YAE3B,cAAc;YACd,MAAM,CAAC,aAAa,GAAG,0KAAS,CAAC,sBAAsB,CACrD;gBAAC,OAAO,IAAI,CAAC;gBAAU,UAAU,QAAQ;aAAG,EAC5C,QAAQ,SAAS;YAGnB,MAAM,CAAC,MAAM,GAAG,0KAAS,CAAC,sBAAsB,CAC9C;gBAAC,OAAO,IAAI,CAAC;aAAS,EACtB,QAAQ,SAAS;YAGnB,MAAM,CAAC,SAAS,GAAG,0KAAS,CAAC,sBAAsB,CACjD;gBAAC,OAAO,IAAI,CAAC;aAAa,EAC1B,QAAQ,SAAS;YAGnB,mDAAmD;YACnD,MAAM,mBAAmB,MAAM,AAAC,QAAQ,OAAO,CAAS,YAAY,CAAC,KAAK,CAAC;YAC3E,MAAM,eAAe,iBAAiB,MAAM;YAE5C,2CAA2C;YAC3C,MAAM,KAAK,MAAM,QAAQ,OAAO,CAC7B,UAAU,CAAC,cACX,QAAQ,CAAC;gBACR,MAAM;gBACN;gBACA;gBACA,iBAAiB;gBACjB,eAAe,qMAAW,CAAC,aAAa,CAAC,SAAS;YACpD,GACC,WAAW;YAEd,mBAAmB;YACnB,MAAM,YAAY,MAAM,gBAAgB,IAAI;YAC5C,MAAM,WAAW,kBAAkB,CAAC,WAAW;YAE/C,WAAW;YACX,SAAS;QACX,EAAE,OAAO,KAAU;YACjB,QAAQ,KAAK,CAAC,kBAAkB;YAChC,SAAS,IAAI,OAAO,IAAI;YACxB,WAAW;QACb,SAAU;YACR,aAAa;QACf;IACF;IAEA,MAAM,aAAa,CAAC,aAAa;IAEjC,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBACC,SAAS;gBACT,UAAU;gBACV,WAAW,CAAC,oEAAoE,EAC9E,aACI,iEACA,iGACJ;0BAED,YAAY,iBAAiB;;;;;;YAG/B,yBACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;8BAAc;;;;;;;;;;;YAI9B,uBACC,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAE,WAAU;8BAAe;;;;;;;;;;;;;;;;;AAKtC"}},
    {"offset": {"line": 511, "column": 0}, "map": {"version":3,"sources":["file:///Users/abdul/projects/stake/app/page.tsx"],"sourcesContent":["\"use client\"\nimport { useWallet } from \"@solana/wallet-adapter-react\";\nimport dynamic from \"next/dynamic\";\nimport { useState, useEffect } from \"react\";\nimport StakeInfo from \"./components/StakeInfo\";\nimport StakeForm from \"./components/StakeForm\";\nimport UnstakeButton from \"./components/UnstakeButton\";\n\nconst WalletMultiButton = dynamic(\n  async () => (await import(\"@solana/wallet-adapter-react-ui\")).WalletMultiButton,\n  { ssr: false }\n);\n\nexport default function Page() {\n  const { connected } = useWallet();\n  const [mounted, setMounted] = useState(false);\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  if (!mounted) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center px-4 py-8 bg-gradient-to-br from-indigo-50 via-purple-50 to-blue-50\">\n        <div className=\"w-full max-w-md space-y-6 p-8 bg-white rounded-2xl shadow-xl border border-gray-100\">\n          <header className=\"text-center space-y-2\">\n            <h1 className=\"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-blue-600 bg-clip-text text-transparent\">\n              SOL Staking\n            </h1>\n            <p className=\"text-sm text-gray-500\">Stake your SOL securely using Anchor</p>\n          </header>\n          <div className=\"flex justify-center py-4\">\n            <div className=\"animate-pulse bg-gray-200 h-12 w-40 rounded-lg\"></div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center px-4 py-8 bg-gradient-to-br from-indigo-50 via-purple-50 to-blue-50\">\n      <div className=\"w-full max-w-md space-y-6 p-8 bg-white rounded-2xl shadow-xl border border-gray-100\">\n        {/* Header */}\n        <header className=\"text-center space-y-2\">\n          <h1 className=\"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-blue-600 bg-clip-text text-transparent\">\n            SOL Staking\n          </h1>\n          <p className=\"text-sm text-gray-500\">Stake your SOL securely using Anchor</p>\n        </header>\n\n        {/* Wallet Button */}\n        <div className=\"flex justify-center\">\n          <WalletMultiButton />\n        </div>\n\n        {connected ? (\n          <div className=\"w-full space-y-6 pt-2\">\n            <StakeInfo />\n            <StakeForm />\n            <UnstakeButton />\n          </div>\n        ) : (\n          <div className=\"text-center py-8\">\n            <p className=\"text-gray-500\">Please connect your wallet to view staking controls.</p>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AACA;;AANA;;;;;;;;AAQA,MAAM,oBAAoB,IAAA,0KAAO;;;;;;IAE7B,KAAK;;AAGM,SAAS;IACtB,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,8LAAS;IAC/B,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACR,WAAW;IACb,GAAG,EAAE;IAEL,IAAI,CAAC,SAAS;QACZ,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAO,WAAU;;0CAChB,8OAAC;gCAAG,WAAU;0CAAgG;;;;;;0CAG9G,8OAAC;gCAAE,WAAU;0CAAwB;;;;;;;;;;;;kCAEvC,8OAAC;wBAAI,WAAU;kCACb,cAAA,8OAAC;4BAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;IAKzB;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BAEb,8OAAC;oBAAO,WAAU;;sCAChB,8OAAC;4BAAG,WAAU;sCAAgG;;;;;;sCAG9G,8OAAC;4BAAE,WAAU;sCAAwB;;;;;;;;;;;;8BAIvC,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;;;;;;;;;;gBAGF,0BACC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,0IAAS;;;;;sCACV,8OAAC,0IAAS;;;;;sCACV,8OAAC,8IAAa;;;;;;;;;;yCAGhB,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAE,WAAU;kCAAgB;;;;;;;;;;;;;;;;;;;;;;AAMzC"}}]
}